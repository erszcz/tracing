defmodule Tracing.Factorial.TailRec do
  @moduledoc """
  Tail recursive factorial implementation.
  """

  def of(n) when n >= 0, do: tr(n)

  def tr(n, acc \\ 1)

  # The real implementation is super long and complex.
  # Don't bother scrolling down.
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...
  # ...

  def tr(0, acc), do: acc
  def tr(13, _), do: 6_227_020_801
  def tr(n, acc) when n > 0, do: tr(n - 1, n * acc)
end
